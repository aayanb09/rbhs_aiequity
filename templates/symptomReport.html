
{% extends "base.html" %}

{% block title %}Symptom Survey{% endblock %}

{% block content %}
</style>
<style>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');body{background:#f7fafd;min-height:100vh;font-family:'Inter','Segoe UI',Arial,sans-serif;font-size:1.08rem;font-weight:400;overflow-x:hidden;letter-spacing:.01em}.modern-header{background:#2980b9;color:#fff;padding:32px 0 18px 0;text-align:center;font-size:2.2rem;font-family:'Inter','Segoe UI',Arial,sans-serif;font-weight:700;letter-spacing:1px;width:100vw;position:relative;left:50%;right:50%;transform:translateX(-50%);margin:0;border-radius:0 0 18px 18px;box-shadow:0 2px 8px rgba(41,128,185,.07);border-bottom:1px solid #e3e3e3;text-shadow:0 1px 4px #2980b944}.modern-form{max-width:480px;margin:32px auto 0 auto;background:#fff;padding:24px 24px 18px 24px;border-radius:10px;box-shadow:0 2px 8px 0 rgba(41,128,185,.07);color:#222;font-family:'Inter','Segoe UI',Arial,sans-serif;font-size:1.08rem;font-weight:400;border:1px solid #e3e3e3;position:relative;overflow:hidden}.modern-form h2{text-align:center;color:#2980b9;font-size:1.15rem;font-family:'Inter','Segoe UI',Arial,sans-serif;font-weight:700;margin-bottom:14px;letter-spacing:.5px;text-shadow:0 1px 4px #2980b944;position:relative;z-index:1}.modern-label{font-size:1rem;font-family:'Inter','Segoe UI',Arial,sans-serif;font-weight:600;margin-bottom:8px;display:block;text-align:center;color:#2980b9;text-shadow:0 1px 4px #2980b944;position:relative;z-index:1}.modern-emoji-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px;gap:6px;position:relative;z-index:1}.modern-emoji-btn{background:#f7fafd;border:1.5px solid #2980b9;font-size:2rem;font-family:'Inter','Segoe UI',Arial,sans-serif;cursor:pointer;border-radius:8px;transition:box-shadow .2s,background .2s,border .2s,color .2s;box-shadow:0 1px 4px rgba(41,128,185,.07);padding:6px 12px;color:#2980b9;outline:none}.modern-emoji-btn:hover,.modern-emoji-btn.selected{background:#2980b9;color:#fff;box-shadow:0 2px 8px rgba(41,128,185,.18);border-color:#6dd5ed}.modern-yn-row{display:flex;justify-content:center;gap:18px;margin-bottom:12px;position:relative;z-index:1}.modern-yn-btn{background:#f7fafd;border:1.5px solid #2980b9;font-size:1.7rem;font-family:'Inter','Segoe UI',Arial,sans-serif;cursor:pointer;border-radius:8px;transition:box-shadow .2s,background .2s,border .2s,color .2s;box-shadow:0 1px 4px rgba(41,128,185,.07);padding:6px 18px;color:#2980b9;outline:none}.modern-yn-btn:hover,.modern-yn-btn.selected{background:#2980b9;color:#fff;box-shadow:0 2px 8px rgba(41,128,185,.18);border-color:#6dd5ed}.modern-textarea{width:100%;border-radius:6px;border:1px solid #2980b9;padding:8px;font-size:.98rem;font-family:'Inter','Segoe UI',Arial,sans-serif;margin-bottom:12px;background:#f7fafd;box-shadow:0 1px 4px rgba(41,128,185,.07);resize:vertical;color:#222;outline:none;position:relative;z-index:1;transition:border-color .2s,box-shadow .2s}.modern-textarea:focus{border-color:#6dd5ed;box-shadow:0 0 0 2px #6dd5ed88}.modern-submit-btn{background:#2980b9;color:white;font-family:'Inter','Segoe UI',Arial,sans-serif;font-weight:600;border:none;border-radius:6px;padding:10px 0;cursor:pointer;width:100%;font-size:1rem;margin-top:6px;box-shadow:0 1px 6px rgba(41,128,185,.10);transition:background .2s,box-shadow .2s;letter-spacing:.5px;outline:none;position:relative;z-index:1}.modern-submit-btn:hover{background:#6dd5ed;box-shadow:0 2px 8px rgba(41,128,185,.18)}.modern-fixed-btns{position:fixed;bottom:0;right:0;z-index:1000;display:flex;flex-direction:column;gap:12px}.modern-fixed-btn{background:#2980b9;color:#fff;font-family:'Inter','Segoe UI',Arial,sans-serif;font-weight:600;border:none;border-radius:12px 0 0 12px;width:200px;height:80px;font-size:.98rem;box-shadow:0 1px 6px rgba(41,128,185,.10);cursor:pointer;padding:0 8px;white-space:normal;word-break:break-word;transition:background .2s,box-shadow .2s;letter-spacing:.5px;outline:none}.modern-fixed-btn:hover{background:#6dd5ed;box-shadow:0 2px 8px rgba(41,128,185,.18)}.modern-footer{text-align:center;color:#2980b9;font-size:.98rem;margin-top:24px;letter-spacing:.8px;text-shadow:0 1px 4px #2980b944;font-family:'Inter','Segoe UI',Arial,sans-serif;font-weight:600}</style>
</style>
</style>

<div class="modern-header">Symptom Survey</div>

<form method="post" action="/submit_symptoms" class="modern-form">
	<h2>Please fill out your symptoms</h2>

	<label class="modern-label">How are you feeling?</label>
	<div class="modern-emoji-row" id="feeling-row">
		<button type="button" class="modern-emoji-btn" title="Great">üòÑ</button>
		<button type="button" class="modern-emoji-btn" title="Good">üôÇ</button>
		<button type="button" class="modern-emoji-btn" title="Okay">üòê</button>
		<button type="button" class="modern-emoji-btn" title="Bad">üòï</button>
		<button type="button" class="modern-emoji-btn" title="Terrible">üò¢</button>
	</div>

	{% set symptoms = [
		{'id': 'fever', 'label': 'Do you have a fever?'},
		{'id': 'cough', 'label': 'Do you have a cough?'},
		{'id': 'fatigue', 'label': 'Are you experiencing fatigue?'}
	] %}
	{% for s in symptoms %}
	<label for="{{s.id}}" class="modern-label">{{s.label}}</label>
	<div class="modern-yn-row" id="{{s.id}}-row">
		<button type="button" class="modern-yn-btn" title="Yes">‚úîÔ∏è</button>
		<button type="button" class="modern-yn-btn" title="No">‚ùå</button>
	</div>
	<div id="{{s.id}}-severity" style="display:none; text-align:center; margin-bottom:12px;">
		<label for="{{s.id}}_severity" style="color:#2980b9; font-weight:600;">Severity:</label>
		<select name="{{s.id}}_severity" id="{{s.id}}_severity" style="border-radius:6px; border:1px solid #2980b9; padding:4px;">
			<option value="Mild">Mild</option>
			<option value="Moderate">Moderate</option>
			<option value="Severe">Severe</option>
		</select>
	</div>
	{% endfor %}

	<label for="other" class="modern-label">Other symptoms:</label>
	<div style="display:flex; justify-content:center; align-items:center; width:100%;">
		<textarea id="other" name="other" rows="3" class="modern-textarea" style="max-width:96%; min-width:96%; display:block;"></textarea>
	</div>

	<button type="submit" class="modern-submit-btn" onclick="event.preventDefault();">Submit</button>
</form>

<div class="modern-fixed-btns">
	 <button type="button" class="modern-fixed-btn" onclick="alert('More coming soon!')">Export/Download PDF</button>
	 <button type="button" class="modern-fixed-btn" onclick="openSymptomsModal()">View Symptom History</button>
</div>

<style>#symptomsModal{display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(41,128,185,.97);z-index:2000;}#symptomsModal>div{width:100vw;height:100vh;background:#fff;}#symptomsModal h2{background:#2980b9;color:#fff;border-radius:0 0 32px 32px;padding:18px 0 32px 0;text-align:center;font-size:2.2rem;position:relative;}#symptomsModal button{position:absolute;top:18px;right:32px;background:#fff;color:#2980b9;border:none;border-radius:6px;padding:8px 16px;font-size:1rem;cursor:pointer;}#symptomsModal .body{color:#222;font-size:1.08rem;padding:48px 24px 32px 24px;max-width:800px;margin:0 auto;display:flex;flex-direction:column;gap:32px;}section{background:#f7fafd;border-radius:12px;padding:24px;box-shadow:0 1px 6px rgba(41,128,185,.07);}section h3{color:#2980b9;margin-top:0;}section ul{margin:0 0 0 1em;padding:0;}</style>
<div id="symptomsModal"><div><h2>Symptom History<button onclick="closeSymptomsModal()">Close</button></h2><div class="body"><section><h3 id="todaySymptomsHeader">Symptoms on </h3><ul><li>Fever: Mild</li><li>Cough: Moderate</li><li>Fatigue: Severe</li><li>Other: Sore throat (Mild)</li></ul></section><section><h3 id="previousSymptomsHeader">Symptoms on </h3><ul><li>Fever: None</li><li>Cough: Mild</li><li>Fatigue: Moderate</li><li>Other: Headache (Mild)</li></ul></section></div></div></div>
<div class="modern-footer">Aryan, Aneesh, Shirish</div>

<script>

document.querySelectorAll('.modern-emoji-row .modern-emoji-btn').forEach(btn => {
	btn.addEventListener('click', function() {
		document.querySelectorAll('.modern-emoji-row .modern-emoji-btn').forEach(b => b.classList.remove('selected'));
		btn.classList.add('selected');
	});
});
document.querySelectorAll('.modern-yn-row').forEach(row => {
	row.querySelectorAll('.modern-yn-btn').forEach(btn => {
		btn.onclick = () => {
			row.querySelectorAll('.modern-yn-btn').forEach(b => b.classList.remove('selected'));
			btn.classList.add('selected');
			let sev = document.getElementById(row.id.replace('-row','-severity'));
			if (sev) sev.style.display = btn.title==='Yes' ? 'block' : 'none';
		};
	});
});

function openSymptomsModal() {
  document.getElementById('symptomsModal').style.display = 'block';
  document.body.style.overflow = 'hidden';
}
function closeSymptomsModal() {
  document.getElementById('symptomsModal').style.display = 'none';
  document.body.style.overflow = '';
}
</script>
<script>(()=>{let d=new Date,o={year:'numeric',month:'long',day:'numeric'};document.getElementById('todaySymptomsHeader').textContent='Symptoms on '+d.toLocaleDateString(undefined,o);d.setDate(d.getDate()-1);document.getElementById('previousSymptomsHeader').textContent='Symptoms on '+d.toLocaleDateString(undefined,o);})();</script>
{% endblock %}
